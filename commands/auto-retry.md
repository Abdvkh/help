# Автовоспроизведение \(АВ\)

Команда может периодически автовоспроизводиться. Например:

* Бот [отправляет сообщение "Привет" ](https://help.bots.business/store/welcome-bot#good-morning-every-day)every 24 hours
* Бот загружает веб-страницу каждый час и разбирает ее. Смотрите наш [PlayMarketNewsBot](https://telegram.me/PlayMarketNewsBot)

{% hint style="danger" %}
Автовоспроизведение расходует 1 итерацию за каждое воспроизведение. Таким образом, если вы ставите АВ на каждую минуту \(60 secs\), то получим 1440 итераций в день.
{% endhint %}

Как нужно ставить АВ:

* на 10 минут: 60\*10 = **600** сек.
* на 1 час: 60\*60 = **3600** сек.
* на 24 часа: 60\*60\*24 = **86400** сек.
* на 1 год: 86400 \* 365 = **24966000** сек.

#### Модификация команды автовоспроизведением в поле изменения:

![Команда может быть модифицирована АВ в поле для изменения](../.gitbook/assets/image%20%2834%29.png)



{% hint style="warning" %}
АВ работает только с помощью [BJS](https://help.bots.business/scenarios-and-bjs). Переменные на [данный момент](https://help.bots.business/scenarios-and-bjs/variables): chat, user, request.
{% endhint %}

### Обрабатывается только на BJS!

Из-за того, что АВ  инициализируется автоматически current chat, user и request не существуют. 

Следовательно мы не можем пользоваться:

```javascript
Bot.sendMessage("Привет");  //не работает в автовоспроизведении
```

Почему? Бот не имеет данных о чате для отправки сообщений! Ни недавних chat (чатов).

Так, что нужно чтобы определить чат:

```javascript
Bot.sendMessage({text: "Привет", chat_id: ВАШ_ЧAT_ID});
```

#### Как могу узнать чат ID?

Сделайте простую команду \(без автовоспроизведения\): `/chat` включающий BJS:

```javascript
Bot.sendMessage(chat.chatid);
```

И запустите это на том чате, в котором, позже, надо будет включить автовоспроизведение. Он и покажет ВАШ\_ЧAT\_ID

Заполни это в предыдущей команде с автовоспроизведением.



{% hint style="info" %}
Вы также можете использовать команды Bot.getProperty и Bot.setProperty. Так что вы можете сохранить чат\_id в одной команде и затем получить его в команде автовоспроизведения 
{% endhint %}

{% hint style="warning" %}
Вы не можете использовать User.getProperty и User.setProperty. 

Пользователи не учавствуют в автовоспроизведении!
{% endhint %}









